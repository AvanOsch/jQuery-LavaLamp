/* jquery.LavaLamp v1.4.2
   https://github.com/AvanOsch/jQuery-LavaLamp
   Copyright (c) 2014 AvanOsch - www.crystalcopy.nl
   Copyright (c) 2008-2012 Jolyon Terwilliger - jolyon@nixbox.com
   Dual licensed under the MIT and GPL licenses:
   http://www.opensource.org/licenses/mit-license.php
   http://www.gnu.org/licenses/gpl.html */
(function(e){jQuery.fn.lavaLamp=function(t){function n(e){var t=parseInt(e);return isNaN(t)?0:t}t=e.extend({target:"li",hoverTarget:"a",container:"",fx:"swing",speed:500,click:function(){return true},startItem:"",includeMargins:false,autoReturn:true,returnDelay:0,setOnClick:true,homeTop:0,homeLeft:0,homeWidth:0,homeHeight:0,returnHome:false,autoResize:false,selectClass:"selectedLava",homeClass:"homeLava",skipClass:"noLava",returnStart:function(){},returnFinish:function(){},hoverStart:function(){},hoverFinish:function(){}},t||{});if(t.container=="")t.container=t.target;if(t.autoResize)e(window).resize(function(){e(t.target+"."+t.selectClass).trigger("mouseenter")});return this.each(function(){function y(r,i){if(t.hoverTarget&&t.hoverTarget!==""&&r.is(t.hoverTarget))r=r.closest(t.target);if(i=="return"){t.returnStart(r)}else{t.hoverStart(r)}if(!r)r=s;if(!t.includeMargins){d=n(r.css("marginLeft"));v=n(r.css("marginTop"))}var a={left:r.position().left+d,top:r.position().top+v,width:r.outerWidth()-l,height:r.outerHeight()-c};if(e.transit){u.stop().transition(a,t.speed,t.fx,function(){if(i=="return"){t.returnFinish(r)}else{t.hoverFinish(r)}})}else{u.stop().animate(a,t.speed,t.fx,function(){if(i=="return"){t.returnFinish(r)}else{t.hoverFinish(r)}})}}if(e(this).css("position")=="static")e(this).css("position","relative");if(t.homeTop||t.homeLeft){var r=e("<"+t.container+' class="'+t.homeClass+'"></'+t.container+">").css({left:t.homeLeft,top:t.homeTop,width:t.homeWidth,height:t.homeHeight,position:"absolute",display:"block"});e(this).prepend(r)}var i=location.pathname+location.search+location.hash,s,u,a=e(t.target,this).not("."+t.skipClass),f,l=0,c=0,h=0,p=0,d=0,v=0;s=e(t.target+"."+t.selectClass,this);if(t.startItem!="")s=a.eq(t.startItem);if((t.homeTop||t.homeLeft)&&s.length<1)s=r;if(s.length<1){var m=0,g;a.each(function(){var t=e("a:first",this).attr("href");if(i.indexOf(t)>-1&&t.length>m){g=e(this);m=t.length}});if(m>0){s=g}}if(s.length<1)s=a.eq(0);s=e(s.eq(0).addClass(t.selectClass));if(t.hoverTarget&&t.hoverTarget!=="")a=e(t.target+" > "+t.hoverTarget,this).not("."+t.skipClass);a.bind("mouseenter focusin touchstart",function(){if(f){clearTimeout(f);f=null}y(e(this))}).click(function(n){if(t.setOnClick){s.removeClass(t.selectClass);s=e(this).addClass(t.selectClass)}return t.click.apply(this,[n,this])});u=e("<"+t.container+' class="backLava"><div class="leftLava"></div><div class="bottomLava"></div><div class="cornerLava"></div></'+t.container+">").css({position:"absolute",display:"block",margin:0,padding:0}).prependTo(this);if(t.includeMargins){h=n(s.css("marginTop"))+n(s.css("marginBottom"));p=n(s.css("marginLeft"))+n(s.css("marginRight"))}l=n(u.css("borderLeftWidth"))+n(u.css("borderRightWidth"))+n(u.css("paddingLeft"))+n(u.css("paddingRight"))-p;c=n(u.css("borderTopWidth"))+n(u.css("borderBottomWidth"))+n(u.css("paddingTop"))+n(u.css("paddingBottom"))-h;if(t.homeTop||t.homeLeft)u.css({left:t.homeLeft,top:t.homeTop,width:t.homeWidth,height:t.homeHeight});else{if(!t.includeMargins){d=n(s.css("marginLeft"));v=n(s.css("marginTop"))}u.css({left:s.position().left+d,top:s.position().top+v,width:s.outerWidth()-l,height:s.outerHeight()-c})}e(this).bind("mouseleave focusout",function(){var e=null;if(t.returnHome)e=r;else if(!t.autoReturn)return true;if(t.returnDelay){if(f)clearTimeout(f);f=setTimeout(function(){y(e,"return")},t.returnDelay)}else{y(e,"return")}return true});})}})(jQuery)
